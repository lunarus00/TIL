## 047 소프트웨어 버전 관리 도구

#### 공유 폴더 방식

- 공유 폴더 방식은 버전 관리 자료가 로컬 컴퓨터의 공유 폴더에 저장되어 관리되는 방식으로, 다음과 같은 특징이 있다
  - 개발자들은 개발이 완료된 파일을 약속된 공유 폴더에 매일 복사한다
  - 담당자는 공유 폴더의 파일을 자기 PC로 복사한 후 컴파일 하여 이상 유무를 확인한다
  - 이상 유무 확인 과정에서 파일의 오류가 확인되면, 해당 파일을 등록한 개발자에게 수정을 의뢰한다
  - 파일에 이상이 없다면 다음날 각 개발자들이 동작 여부를 다시 확인한다
  - 파일을 잘못 복사하거나 다른 위치로 복사하는 것에 대비하기 위해 파일의 변경사항을 데이터베이스에 기록하여 관리한다
  - 종류에는 SCCS, RCS, PVCS, QVCS 등이 있다



#### 클라이언트/서버 방식

- 클라이언트/서버 방식은 버전 관리 자료가 중앙 시스템(서버)에 저장되어 관리되는 방식으로, 다음과 같은 특징이 있다
  - 서버의 자료를 개발자별로 자신의 PC(클라이언트)로 복사하여 작업한 후 변경된 내용을 서버에 반영한다
  - 모든 버전 관리는 서버에서 수행된다
  - 하나의 파일을 서로 다른 개발자가 작업할 경우 경고 메시지를 출력한다
  - 서버에 문제가 생기면, 서버가 복구되기 전까지 다른 개발자와의 협업 및 버전 관리 작업은 중단된다
  - 종류에는 CVS, SVN(Subversion), CVSNT, Clear Case, CMVC, Perfoce 등이 있다



#### 분산 저장소 방식

- 분산 저장속 방식은 버전 관리 자료가 하나의 원격 저장소와 분산된 개발자 PC의 로컬 저장소에 함께 저장되어 관리되는 방식으로, 다음과 같은 특징이 있다
  - 개발자별로 원격 저장소의 자료를 자신의 로컬 저장소로 복사하여 작업한 후 변경된 내용을 로컬 저장소에서 우선 반영(버전 관리)한 다음 이를 원격 저장소에 반영한다
  - 로컬 저장소에서 버전 관리가 가능하므로 원격 저장소에 문제가 생겨도 로컬 저장소의 자료를 이용하여 작업할 수 있다
  - 종류에는 Git, GNU arch, DCVS, Bazaar, Mercurial, TeamWare, Bitkeeper, Plastic SCM 등이 있다



#### Subversion(서브버전, SVN)

- Subversion은 CVS를 개선한 것으로, 아파치 소프트웨어 재단에서 2000년에 발표하였다
- 클라이언트/서버 구조로, 서버(저장소, Repository)에는 최신 버전의 파일들과 변경 내역이 관리된다
- 서버의 자료를 클라이언트로 복사해와 작업한 후 변경 내용을 서버에 반영(Commit) 한다
- 모든 개발 작업은 trunk 디렉터리에서 수행하며, 추가 작업은 branches 디렉터리 안에 별도의 디렉터리를 만들어 작업을 완료한 후 trunk 디렉터리와 병합(merge) 한다
- 커밋(Commit)할 때마다 리비전(Revision)이 1씩 증가한다
- 클라이언트는 대부분의 운영체제에서 사용되지만, 서버는 주로 유닉스를 사용한다
- 소스가 오픈되어 있어 무료로 사용할 수 있다
- CVS의 단점이었던 파일이나 디렉터리의 이름 변경, 이동 등이 가능하다
- 다음은 Subversion의 주요 명령어이다
  - add
    - 새로운 파일이나 디렉터리를 버전 관리 대상으로 등록한다
    - add로 등록되지 않은 대상은 commit이 적용되지 않는다
  - commit
    - 버전 관리 대상으로 등록된 클라이언트의 소스 파일을 서버의 소스 파일에 적용한다
  - update
    - 서버의 최신 commit 이력을 클라이언트의 소스 파일에 적용한다
    - commit 전에는 매번 update를 수행하여 클라이언트에 적용되지 않은 서버의 변동 내역을 클라이언트에 적용한다
  - checkout
    - 버전 관리 정보와 소스 파일을 서버에서 클라이언트로 받아온다
  - lock/unlock
    - 서버의 소스 파일이나 디렉터리를 잠그거나 해제한다
  - import
    - 아무것도 없는 서버의 저장소에 맨 처음 소스 파일을 저장하는 명령으로, 한 번 사용하면 다시 사용하지 않는다
  - export
    - 버전 관리에 대한 정보를 제외한 순수한 소스 파일만을 서버에서 받아온다
  - info
    - 지정한 파일에 대한 위치나 마지막 수정 일자 등에 대한 정보를 표시한다
  - diff
    - 지정된 파일이나 경로에 대해 이전 리비전과의 차이를 표시한다
  - merge
    - 다른 디렉터리에서 작업된 버전 관리 내역을 기본 개발 작업과 병합한다



#### Git(깃)

- Git은 리누스 토발즈(Linus Torvalds)가 2005년 리눅스 커널 개발에 사용할 관리 도구로 개발한 이후 주니오 하마노(Junio Hamano)에 의해 유지 보수되고 있다
- Git은 분산 버전 관리 시스템으로 2개의 저장소, 즉 지역(로컬) 저장소와 원격 저장소가 존재한다
- 지역 저장소는 개발자들이 실재 개발을 진행하는 장소로, 버전 관리가 수행된다
- 원격 저장소는 여러 사람들이 협업을 위해 버전을 공동 관리하는 곳으로, 자신의 버전 관리 내역을 반영하거나 다른 개발자의 변경 내용을 가져올 때 사용한다
- 버전 관리가 지역 저장소에서 진행되므로 버전 관리가 신속하게 처리되고, 원격 저장소나 네트워크에 문제가 있어도 작업이 가능하다
- 브랜치를 이용하면 기본 버전 관리 틀에 영향을 주지 않으면서 다양한 형태의 기능 테스팅이 가능하다
- 파일의 변화를 스냅샷(Snapshot)으로 저장하는데, 스냅샷은 이전 스냅샷의 포인터를 가지므로 버전의 흐름을 파악할 수 있다
- 다음은 Git의 주요 명령어이다
  - add
    - 작업 내역을 지역 저장소에 저장하기 위해 스테이징 영역(Staging Area)에 추가한다
    - '--all' 옵션으로 작업 디렉터리의 모든 파일을 스테이징 영역에 추가할 수 있다
  - commit
    - 작업 내역을 지역 저장소에 저장한다
  - branch
    - 새로운 브랜치를 생성한다
    - 최초로 commit을 하면 마스터(master) 브랜치가 생성된다
    - commit 할 때마다 해당 브랜치는 가장 최근의 commit한 내용을 가리키게 된다
    - '-d' 옵션으로 브랜치를 삭제할 수 있다
  - checkout
    - 지정한 브랜치로 이동한다
    - 현재 작업 중인 브랜치는 HEAD 포인터가 가리키는데, checkout 명령을 통해 HEAD 포인터를 지정한 브랜치로 이동시킨다
  - merge
    - 지정한 브랜치의 변경 내역을 HEAD 포인터가 가리키는 브랜치에 반영함으로써 두 브랜치를 병합한다
  - init
    - 지역 저장소를 생성한다
  - remote add
    - 원격 저장소에 연결한다
  - push
    - 로컬 저장소의 변경 내역을 원격 저장소에 반영한다
  - fetch
    - 원격 저장소의 변경 이력만을 지역 저장소로 가져와 반영한다
  - clone
    - 원격 저장소의 전체 내용을 지역 저장소로 복제한다
  - fork
    - 지정한 원격 저장소의 내용을 자신의 원격 저장소로 복제한다