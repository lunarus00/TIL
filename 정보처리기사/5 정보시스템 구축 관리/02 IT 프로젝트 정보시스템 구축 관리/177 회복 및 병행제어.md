## 177 회복 및 병행제어

#### 회복(Recovery)

- 회복은 트랜잭션들을 수행하는 도중 장애가 발생하여 데이터베이스가 손상되었을 때 손상되기 이전의 정상 상태로 복구하는 작업이다
- 장애의 유형
  - 트랜잭션 장애 : 입력 데이터 오류, 불명확한 데이터, 시스템 자원 요구의 과다 등 트랜잭션 내부의 비정상적인 상황으로 인하여 프로그램 실행이 중지되는 현상
  - 시스템 장애 : 데이터베이스에 손상을 입히지는 않으나 하드웨어 오동작, 소프트웨어의 손상, 교착상태 등에 의해 모든 트랜잭션의 연속적인 수행에 장애를 주는 현상
  - 미디어 장애 : 저장장치인 디스크 블록의 손상이나 디스크 헤드의 충돌 등에 의해 데이터베이스의 일부 또는 전부가 물리적으로 손상된 상태
- 회복 관리기(Recovery Management)
  - 회복 관리기는 DBMS의 구성 요소이다
  - 회복 관리기는 트랜잭션 실행이 성공적으로 완료되지 못하면 트랜잭션이 데이터베이스에 생성했던 모든 변화를 취소(Undo) 시키고, 트랜잭션 수행 이전의 원래 상태로 복구하는 역할을 담당한다
  - 메모리 덤프, 로그(Log)를 이용하여 회복을 수행한다



#### 병행제어(Concurrency Control)

- 병행제어란 다중 프로그램의 이점을 활용하여 동시에 여러 개의 트랜잭션을 병행수행할 때, 동시에 실행되는 트랜잭션들이 데이터베이스의 일관성을파괴하지 않도록 트랜잭션 간의 상호 작용을 제어하는 것이다
- 병행제어의 목적
  - 데이터베이스의 공유를 최대화한다
  - 시스템의 활용도를 최대화한다
  - 데이터베이스의 일관성을 유지한다
  - 사용자에 대한 응답 시간을 최소화한다



#### 병행수행의 문제점

- 병행제어 기법에 의한 제어 없이 트랜잭션들이 데이터베이스에 동시에 접근하도록 허용할 경우 갱신 분실, 비완료 의존성, 모순성, 연쇄 복귀 등의 문제점이 발생한다
- 갱신 분실(Lost Update)
  - 두 개 이상의 트랜잭션이 같은 자료를 공유하여 갱신할 때 갱신 결과ㅏ의 일부가 없어지는 현상이다
- 비완료 의존성(Uncommitted Dependency)
  - 하나의 트랜잭션 수행이 실패한 후 회복되기 전에 다른 트랜잭션이 실패한 갱신 결과를 참조하는 현상이다
  - 임시 갱신이라고도 한다
- 모순성(Inconsistency)
  - 두 개의 트랜잭션이 병행수행될 때 원치 않는 자료를 이용함으로써 발생하는 문제이다
  - 불일치 분석(Inconsistent Analysis)이라고도 한다
- 연쇄 복귀(Cascading Rollback)
  - 병행수행되던 트랜잭션들 중 어느 하나에 문제가 생겨 Rollback하는 경우 다른 트랜잭션도 함께 Rollback되는 현상이다