## 086 데이터베이스 저장 공간 설계

#### 테이블(Table)

- 테이블은 데이터베이스의 가장 기본적인 객체로 로우(Row, 행)와 컬럼(Column, 열)으로 구성되어 있다
- 데이터베이스의 모든 데이터는 테이블에 저장된다
- 테이블은 논리 설계 단계의 개체(Entity)에 대응하는 객체이다
- DBMS 종류에 따라 테이블의 명칭과 기능 등은 약간씩 차이가 있다
- 테이블의 종류에는 일반 테이블, 클러스터 인덱스 텡이블, 파티셔닝 테이블, 외부 테이블, 임시 테이블 등이 있다



#### 일반 테이블

- 일반 테이블은 현재 사용되는 대부분의 DBMS에서 표준 테이블로 사용되는 테이블 형태이다
- 테이블에 저장되는 데이터의 로우(Row) 위치는 속성 값에 상관없이 데이터가 저장되는 순서에 따라 결정된다



#### 클러스터드 인덱스 테이블(Clustered Index Table)

- 클러스터드 인덱스 테이블은 기본키(Primary Key)나 인덱스키의 순서에 따라 데이터가 저장되는 테이블이다
- 클러스터 인덱스 테이블은 일반적인 인덱스를 사용하는 테이블에 비해 접근 경로가 단축된다



#### 파티셔닝 테이블(Partitioning Table)

- 파티셔닝 테이블은 대용량의 테이블을 작은 논리적 단위인 파티션(Partition)으로 나눈 테이블이다
- 파티셔닝 테이블은 대용량의 데이터를 효과적으로 관리할 수 있지만 파티션 키를 잘못 구성하면 성능 저하 등의 역효과를 초래할 수 있다
- 파티셔닝 방식에 따라 범위 분할, 해시 분할, 조합 분할 등으로 나뉜다
  - 범위 분할(Range Partitioning) : 지정한 열의 값을 기준으로 분할
  - 해시 분할(Hash Partitioning) : 해시 함수를 적용한 결과 값에 따라 데이터를 분할
  - 조합 분할(Composite Partitioning) : 범위 분할로 분할한 다음 해시 함수를 적용하여 다시 분할하는 방식



#### 외부 테이블(External Table)

- 외부 테이블은 데이터베이스에서 일반 테이블처럼 이용할 수 있는 외부 파일로, 데이터베이스 내에 객체로 존재한다
- 외부 테이블은 데이터웨어하우스에서 ETL 등의 작업에 유용하게 사용된다
  - 데이터웨어하우스(Data Warehouse) : 조직이나 기업체의 중심이 되는 주요 업무 시스템에서 추출되어 새로이 생성된 데이터베이스로서, 의사결정지원 시스템을 지원하는 주체적, 통합적, 시간적 데이터의 집합체를 말한다
  - ETL(Extraction, Transformation, Loading) : 데이터웨어하우스를 사용하여 추출(Extract), 변환(Transform), 적재(Load) 하는 일련의 모든 과정을 의미한다



#### 임시 테이블(Temporary Table)

- 임시 테이블은 트랜잭션이나 세션별로 데이터를 저장하고 처리할 수 있는 테이블이다
- 임시 테이블에 저장된 데이터는 트랜잭션이 종료되면 삭제된다
- 임시 테이블은 절차적인 처리를 위해 임시로 사용하는 테이블이다



#### 컬럼(Column)

- 컬럼은 테이블의 열을 구성하는 요소로 데이터 타입(Data Type), 길이(Length) 등으로 정의된다
- 데이터 타입은 데이터의 일관성 유지를 위해 사용되는 가장 기본적인 것으로, 도메인을 정의한 경우 도메인에 따라 데이터의 타입과 길이가 정의된다
- 두 컬럼을 비교하는 연산에서 두 컬럼의 데이터 타입이나 길이가 다르면 DBMS 내부적으로 데이터 타입을 변환한 후 비교 연산을 수행한다
- 참조 관계인 컬럼들은 데이터 타입과 길이가 일치해야 한다
- 데이터 타입과 길이 지정 시 고려 사항
  - 가변 길이 데이터 타입 : 예상되는 최대 길이로 정의
  - 고정 길이 데이터 타입 : 최소 길이로 지정
  - 소수점 이하 자릿수 : 소수점 이하 자릿수는 반올림되어 저장
- 데이터 타입에 따른 컬럼의 물리적인 순서
  - 고정 길이 컬럼이고 NOT Null인 컬럼 : 앞쪽
  - 가변 길이 컬럼 : 뒤쪽
  - Null 값이 많을 것으로 예상되는 컬럼 : 뒤쪽



#### 테이블스페이스(Tablespace)

- 테이블스페이스는 테이블이 저장되는 논리적인 영역으로, 하나의 테이블스페이스에 하나 또는 그 이상의 테이블을 저장할 수 있다
- 테이블을 저장하면 논리적으로는 테이블스페이스에 저장되고, 물리적으로는 해당 테이블스페이스와 연관된 데이터 파일(Data File)에 저장된다
- 데이터베이스를 테이블, 테이블스페이스, 데이터 파일로 나눠 관리하면 논리적 구성이 물리적 구성에 종속되지 않아 투명성이 보장된다
- 테이블스페이스는 데이터베이스에 저장되는 내용에 따라 테이블, 인덱스, 임시(Temporary) 등의 용도로 구분하여 설계한다
- 테이블스페이스 설계 시 고려사항
  - 테이블스페이스는 업무별로 구분하여 지정한다
  - 대용량 테이블은 하나의 테이블스페이스에 독립적으로 저장한다
  - 테이블과 인덱스는 분리하여 저장한다
  - LOB(Large Object) 타입의 데이터는 독립적인 공간으로 지정한다